<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style type="text/css">
        div {
            text-align: center;
            border: 1px solid black;
            font-size: 200%;
        }
    </style>
</head>
<body>
<script>
    function createDiv(wantedCount) {
        return new Promise(function(resolve) {
            (function divBuilder(i) {
                var newDiv = document.createElement('div');
                newDiv.textContent = i;
                document.body.appendChild(newDiv);
                i++;
                if(i < wantedCount) {
                    setTimeout(function () {
                        divBuilder(i);
                    }, 0);
                } else {
                    resolve();
                }
            }(0));
        });
    }
    createDiv(900000).then(function() {
        var newDiv = document.createElement('div');
        newDiv.textContent = "All done!!";
        document.body.appendChild(newDiv);
    });
</script>
</body>
</html>
